(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const A=document.querySelector("#sorting-btn"),k=document.querySelector("#categories-btn"),q=document.querySelector("#add-btn"),c=document.querySelector(".sort-container"),a=document.querySelector(".categories-container"),l=document.querySelector(".add-item-container"),m=document.querySelector("#title-input"),p=document.querySelector("#category-input"),b=document.querySelector("#date-input"),u=document.querySelector("#add-item-btn");let M=!1,$=!1,g=!1;const O=document.querySelector("#sort-name-btn"),B=document.querySelector("#sort-deadline-btn"),R=document.querySelector("#sort-date-added-btn");let d="deadline",r=[];const H=document.querySelector("#todo-items-container");function w(t){const n=t.currentTarget.id;n==="sorting-btn"?(c==null||c.classList.toggle("open"),l!=null&&l.classList.contains("open")&&(l==null||l.classList.remove("open")),a!=null&&a.classList.contains("open")&&(a==null||a.classList.remove("open"))):n==="add-btn"?(l==null||l.classList.toggle("open"),c!=null&&c.classList.contains("open")&&(c==null||c.classList.remove("open")),a!=null&&a.classList.contains("open")&&(a==null||a.classList.remove("open"))):n==="categories-btn"&&(a==null||a.classList.toggle("open"),c!=null&&c.classList.contains("open")&&(c==null||c.classList.remove("open")),l!=null&&l.classList.contains("open")&&(l==null||l.classList.remove("open")))}function E(t){const e=t.currentTarget,n=e.value,s=e.parentElement.querySelector(".input-error");if(e.id==="date-input"){const i=new Date,f=i.getFullYear(),D=i.getMonth()+1,S=i.getDate(),v=n.split("-"),L=Number(v[0]),h=Number(v[1]),T=Number(v[2]);L>f&&L.toString().length===4||L===f&&h>D||L===f&&h===D&&T>=S?(g=!0,s.innerHTML=""):n?(g=!1,s.innerHTML="cannot be in the Past"):(g=!1,s.innerHTML="is Required")}e.id==="title-input"&&(n?(M=!0,s.innerHTML=""):(M=!1,s.innerHTML="is Required")),e.id==="category-input"&&(n?($=!0,s.innerHTML=""):($=!1,s.innerHTML="is Required")),M&&$&&g?u==null||u.removeAttribute("disabled"):u==null||u.setAttribute("disabled","true")}function N(t){const n=t.currentTarget.id;n==="sort-name-btn"&&(d==="name"?d="nameReversed":d="name"),n==="sort-deadline-btn"&&(d==="deadline"?d="deadlineReversed":d="deadline"),n==="sort-date-added-btn"&&(d==="dateAdded"?d="dateAddedReversed":d="dateAdded"),y(),c==null||c.classList.remove("open")}function F(){d==="name"&&r.sort((t,e)=>t.title<e.title?-1:1),d==="nameReversed"&&r.sort((t,e)=>t.title>e.title?-1:1),d==="deadline"&&r.sort((t,e)=>{const n=new Date(t.deadline),o=new Date(e.deadline);return n.valueOf()-o.valueOf()}),d==="deadlineReversed"&&r.sort((t,e)=>{const n=new Date(t.deadline);return new Date(e.deadline).valueOf()-n.valueOf()}),d==="dateAdded"&&r.sort((t,e)=>{const n=new Date(t.dateAddedToList),o=new Date(e.dateAddedToList);return n.valueOf()-o.valueOf()}),d==="dateAddedReversed"&&r.sort((t,e)=>{const n=new Date(t.dateAddedToList);return new Date(e.dateAddedToList).valueOf()-n.valueOf()})}function Y(t){const e=[],n=new Date(t.deadline),o=new Date(t.dateAddedToList),s=n.getTime(),i=new Date().getTime(),f=s-i,D=Math.ceil(f/(1e3*60*60*24));e.push(String(D));const S=`0${n.getMonth()+1}`.slice(-2),v=`0${n.getDate()}`.slice(-2),L=`${n.getFullYear()}-${S}-${v}`;e.push(L);const h=`0${o.getMonth()+1}`.slice(-2),T=`0${n.getDate()}`.slice(-2),I=`${o.getFullYear()}-${h}-${T}`;return e.push(I),e}function _(t){const e=Number(t);return e<=5&&e>0?" close-deadline":e<=0?" after-deadline":""}function V(t){const e=Number(t);return e===1||e===-1?`${e} day`:`${e} days`}function P(){const t=[],e=a.querySelector("ul"),n=document.querySelector("#browse");e.innerHTML="<li>> <button>all categories</button> <</li>",n.innerHTML="";for(let s=0;s<r.length;s++){const i=r[s];t.push(i.category)}t.sort((s,i)=>s<i?-1:1);const o=[...new Set(t)];for(let s=0;s<o.length;s++){const i=o[s];e.innerHTML+=`<li>> <button>${i}</button> <</li>`,n.innerHTML+=`<option value="${i}">`}}function y(){H.innerHTML="",F();for(let t=0;t<r.length;t++){const e=r[t],n=x(e),o=Y(e),s=_(o[0]),i=V(o[0]);H.innerHTML+=`
    <article id="${t}" class="todo-item${n}${s}">

      <button>
        <span id="${t}" class="material-symbols-outlined check-item-btn">task_alt</span>
      </button>

      <p>${e.title}</p>

      <p class="deadline-date">Deadline: ${o[1]}</p>
      <p class="date-added-date">Date added: ${o[2]}</p>

      <div class="time-left">
        <span class="material-symbols-outlined">hourglass_empty</span>
        <span>${i}</span>
      </div>

      <button>
        <span id="${t}" class="material-symbols-outlined remove-item-btn">do_not_disturb_on</span>
      </button>
    
    </article>
    `}P(),z(),U()}function J(t){const e=t.currentTarget,n=document.querySelector(".todo-item.open");if(n!==null){if(e.id===n.id){e.classList.toggle("open");return}n.classList.remove("open"),e.classList.add("open")}e.classList.add("open")}function K(t){const e=t.currentTarget,n=Number(e.id);r.splice(n,1),y()}function j(t){const e=t.currentTarget,n=Number(e.id),o=r[n];o.isChecked?o.isChecked=!1:o.isChecked=!0,y()}function x(t){return t.isChecked?" checked":""}function z(){const t=document.querySelectorAll(".todo-item"),e=document.querySelectorAll(".remove-item-btn"),n=document.querySelectorAll(".check-item-btn");for(let o=0;o<t.length;o++)t[o].addEventListener("click",J);for(let o=0;o<e.length;o++)e[o].addEventListener("click",K);for(let o=0;o<n.length;o++)n[o].addEventListener("click",j)}function G(){l==null||l.classList.remove("open"),u==null||u.setAttribute("disabled","true"),m.value="",p.value="",b.value=""}function Q(){const t=m==null?void 0:m.value,e=p==null?void 0:p.value,n=new Date(b.value),o=new Date,s={title:t,category:e,deadline:n,dateAddedToList:o,isChecked:!1};r.push(s),G(),y()}function U(){localStorage.setItem("data",JSON.stringify(r))}function W(){localStorage.getItem("data")!==null&&(r=JSON.parse(localStorage.getItem("data")))}A==null||A.addEventListener("click",w);k==null||k.addEventListener("click",w);q==null||q.addEventListener("click",w);m==null||m.addEventListener("blur",E);p==null||p.addEventListener("blur",E);b==null||b.addEventListener("change",E);u==null||u.addEventListener("click",Q);O.addEventListener("click",N);B.addEventListener("click",N);R.addEventListener("click",N);W();y();
