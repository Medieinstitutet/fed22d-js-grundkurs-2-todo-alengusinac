(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();const A=document.querySelector("#sorting-btn"),q=document.querySelector("#categories-btn"),M=document.querySelector("#add-btn"),r=document.querySelector(".sort-container"),c=document.querySelector(".categories-container"),a=document.querySelector(".add-item-container"),m=document.querySelector("#title-input"),g=document.querySelector("#category-input"),b=document.querySelector("#date-input"),u=document.querySelector("#add-item-btn");let $=!1,E=!1,L=!1;const F=document.querySelector("#sort-name-btn"),R=document.querySelector("#sort-deadline-btn"),Y=document.querySelector("#sort-date-added-btn");let d="deadline",w="all categories",l=[],T=[];const O=document.querySelector("#todo-items-container");function I(n){const s=n.currentTarget.id;s==="sorting-btn"?(r==null||r.classList.toggle("open"),a!=null&&a.classList.contains("open")&&(a==null||a.classList.remove("open")),c!=null&&c.classList.contains("open")&&(c==null||c.classList.remove("open"))):s==="add-btn"?(a==null||a.classList.toggle("open"),r!=null&&r.classList.contains("open")&&(r==null||r.classList.remove("open")),c!=null&&c.classList.contains("open")&&(c==null||c.classList.remove("open"))):s==="categories-btn"&&(c==null||c.classList.toggle("open"),r!=null&&r.classList.contains("open")&&(r==null||r.classList.remove("open")),a!=null&&a.classList.contains("open")&&(a==null||a.classList.remove("open")))}function N(n){const e=n.currentTarget,s=e.value,t=e.parentElement.querySelector(".input-error");if(e.id==="date-input"){const i=new Date,f=i.getFullYear(),h=i.getMonth()+1,S=i.getDate(),y=s.split("-"),p=Number(y[0]),D=Number(y[1]),k=Number(y[2]);p>f&&p.toString().length===4||p===f&&D>h||p===f&&D===h&&k>=S?(L=!0,t.innerHTML=""):s?(L=!1,t.innerHTML="cannot be in the Past"):(L=!1,t.innerHTML="is Required")}e.id==="title-input"&&(s?($=!0,t.innerHTML=""):($=!1,t.innerHTML="is Required")),e.id==="category-input"&&(s?(E=!0,t.innerHTML=""):(E=!1,t.innerHTML="is Required")),$&&E&&L?u==null||u.removeAttribute("disabled"):u==null||u.setAttribute("disabled","true")}function H(n){const s=n.currentTarget.id;s==="sort-name-btn"&&(d==="name"?d="nameReversed":d="name"),s==="sort-deadline-btn"&&(d==="deadline"?d="deadlineReversed":d="deadline"),s==="sort-date-added-btn"&&(d==="dateAdded"?d="dateAddedReversed":d="dateAdded"),v(),r==null||r.classList.remove("open")}function _(){d==="name"&&l.sort((n,e)=>n.title<e.title?-1:1),d==="nameReversed"&&l.sort((n,e)=>e.title<n.title?-1:1),d==="deadline"&&l.sort((n,e)=>{const s=new Date(n.deadline),o=new Date(e.deadline);return s.valueOf()-o.valueOf()}),d==="deadlineReversed"&&l.sort((n,e)=>{const s=new Date(n.deadline);return new Date(e.deadline).valueOf()-s.valueOf()}),d==="dateAdded"&&l.sort((n,e)=>{const s=new Date(n.dateAddedToList),o=new Date(e.dateAddedToList);return s.valueOf()-o.valueOf()}),d==="dateAddedReversed"&&l.sort((n,e)=>{const s=new Date(n.dateAddedToList);return new Date(e.dateAddedToList).valueOf()-s.valueOf()})}function V(n){const e=[],s=new Date(n.deadline),o=new Date(n.dateAddedToList),t=s.getTime(),i=new Date().getTime(),f=t-i,h=Math.ceil(f/(1e3*60*60*24));e.push(String(h));const S=`0${s.getMonth()+1}`.slice(-2),y=`0${s.getDate()}`.slice(-2),p=`${s.getFullYear()}-${S}-${y}`;e.push(p);const D=`0${o.getMonth()+1}`.slice(-2),k=`0${s.getDate()}`.slice(-2),B=`${o.getFullYear()}-${D}-${k}`;return e.push(B),e}function x(n){const e=Number(n);return e<=5&&e>0?" close-deadline":e<=0?" after-deadline":""}function P(n){const e=Number(n);return e===1||e===-1?`${e} day`:`${e} days`}function J(){const n=[],e=c.querySelector("ul"),s=document.querySelector("#browse");e.innerHTML='<li>> <button class="category-btn">all categories</button> <</li>',s.innerHTML="";for(let t=0;t<l.length;t++){const i=l[t];n.push(i.category)}n.sort((t,i)=>t<i?-1:1);const o=[...new Set(n)];for(let t=0;t<o.length;t++){const i=o[t];e.innerHTML+=`<li>> <button class="category-btn">${i}</button> <</li>`,s.innerHTML+=`<option value="${i}">`}}function K(n){w=n.currentTarget.innerText,v(),c==null||c.classList.remove("open")}function j(){if(w==="all categories"){T=l;return}T=l.filter(n=>n.category===w)}function z(){for(let n=0;n<l.length;n++){const e=l.findIndex(s=>s.isChecked===!0);l.push(l.splice(e,1)[0])}}function v(){O.innerHTML="",_(),z(),j();for(let n=0;n<T.length;n++){const e=T[n],s=W(e),o=V(e),t=x(o[0]),i=P(o[0]);O.innerHTML+=`
    <article id="${n}" class="todo-item${s}${t}">

      <button>
        <span id="${n}" class="material-symbols-outlined check-item-btn">task_alt</span>
      </button>

      <p>${e.title}</p>

      <p class="deadline-date">Deadline: ${o[1]}</p>
      <p class="date-added-date">Date added: ${o[2]}</p>

      <div class="time-left">
        <span class="material-symbols-outlined">hourglass_empty</span>
        <span>${i}</span>
      </div>

      <button>
        <span id="${n}" class="material-symbols-outlined remove-item-btn">do_not_disturb_on</span>
      </button>
    
    </article>
    `}J(),X(),ee()}function G(n){const e=n.currentTarget,s=document.querySelector(".todo-item.open");if(s!==null){if(e.id===s.id){e.classList.toggle("open");return}s.classList.remove("open"),e.classList.add("open")}e.classList.add("open")}function Q(n){const e=n.currentTarget,s=Number(e.id);l.splice(s,1),v()}function U(n){const e=n.currentTarget,s=Number(e.id),o=l[s];o.isChecked?o.isChecked=!1:o.isChecked=!0,console.log(o.isChecked),v()}function W(n){return n.isChecked?" checked":""}function X(){const n=document.querySelectorAll(".todo-item"),e=document.querySelectorAll(".remove-item-btn"),s=document.querySelectorAll(".check-item-btn"),o=document.querySelectorAll(".category-btn");for(let t=0;t<n.length;t++)n[t].addEventListener("click",G);for(let t=0;t<e.length;t++)e[t].addEventListener("click",Q);for(let t=0;t<s.length;t++)s[t].addEventListener("click",U);for(let t=0;t<o.length;t++)o[t].addEventListener("click",K)}function Z(){a==null||a.classList.remove("open"),u==null||u.setAttribute("disabled","true"),m.value="",g.value="",b.value=""}function C(){const n=m==null?void 0:m.value,e=g==null?void 0:g.value,s=new Date(b.value),o=new Date,t={title:n,category:e,deadline:s,dateAddedToList:o,isChecked:!1};l.push(t),Z(),v()}function ee(){localStorage.setItem("data",JSON.stringify(l))}function te(){localStorage.getItem("data")!==null&&(l=JSON.parse(localStorage.getItem("data")))}A==null||A.addEventListener("click",I);q==null||q.addEventListener("click",I);M==null||M.addEventListener("click",I);m==null||m.addEventListener("blur",N);g==null||g.addEventListener("blur",N);b==null||b.addEventListener("change",N);u==null||u.addEventListener("click",C);F.addEventListener("click",H);R.addEventListener("click",H);Y.addEventListener("click",H);te();v();
